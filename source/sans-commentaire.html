<!DOCTYPE html>
<html lang="fr-FR">
<title>Sans commentaire</title>
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="assets/common.css">
<link rel="stylesheet" href="assets/article.css">
<h1>Sans commentaire</h1>
<p>Je ne compte plus les fois oÃ¹ je remarque ce genre de structureÂ :</p>
<link rel="stylesheet" href="assets/code.css">
<pre><code class=" source.php">class EmailEventManager
{
    /**
     * EmailEventManager constructor.
     * @param EntityManagerInterface $entityManager
     * @param EmailManager $emailManager
     */
    public function __construct(
        private EntityManagerInterface $entityManager,
        private EmailManager $emailManager,
        private Registry $workflows
    ) {}

    // â€¦
}</code></pre>
<p>
    Que ce soit clairÂ : je nâ€™ai pas inventÃ© ce code pour les besoins de ce post. Il provient dâ€™une
    <i lang="en">pull request</i> rÃ©cente sur un projet en activitÃ©. Et ce nâ€™est quâ€™un des innombrables exemples que
    jâ€™aurais pu choisir.
</p>
<p>
    Ces blocs de commentaires
    (<a href="https://docs.phpdoc.org/3.0/guide/references/phpdoc/basic-syntax.html#what-is-a-docblock" hreflang="en" lang="en">DocBlock</a>)
    me hÃ©rissent le poil. En lâ€™occurrenceÂ :
</p>
<ul>
    <li>
        le rÃ©sumÃ©
        (<a href="https://docs.phpdoc.org/3.0/guide/references/phpdoc/basic-syntax.html#summary" hreflang="en" lang="en">summary</a>)
        ne donne aucune information que le code ne donne pas dÃ©jÃ ,
    </li>
    <li>
        les <a href="https://docs.phpdoc.org/3.0/guide/references/phpdoc/basic-syntax.html#tags" hreflang="en" lang="en">tags</a>
        <a href="https://docs.phpdoc.org/3.0/guide/references/phpdoc/tags/param.html#param" hreflang="en" lang="en"><code>@param</code></a>
        dupliquent la signature de la fonction, mais sans offrir aucune garantie sur le type des argumentsÂ â€”
        contrairement au code,
    </li>
    <li>
        le bloc de commentaires est incompletÂ : le paramÃ¨tre <code>$workflows</code> nâ€™y est pas prÃ©sent.
    </li>
</ul>
<p>
    Nous violons donc allÃ©grement deux des
    <a href="https://stackoverflow.blog/2021/12/23/best-practices-for-writing-code-comments/" hreflang="en">neuf rÃ¨gles
        Ã  suivre pour des commentaires utiles</a>Â :
</p>
<ul>
    <li><em lang="en">Comments should not duplicate the code.</em></li>
    <li><em lang="en">Comments should dispel confusion, not cause it.</em></li>
</ul>
<p>
    Comme le mentionne Ã©galement lâ€™article liÃ© ci-dessus (je vous conseille grandement sa lecture), les commentaires
    sont coÃ»teux Ã  maintenir. Si <code>$workflows</code> nâ€™y apparaÃ®t pas, câ€™est certainement quâ€™il a Ã©tÃ©
    ajoutÃ© aprÃ¨s gÃ©nÃ©ration du bloc. Ou alors le bloc a Ã©tÃ© copiÃ© dâ€™une autre classe, et laissÃ© tel quel.
    Ce code nâ€™est mÃªme pas en production, et il est dÃ©jÃ  obsolÃ¨te.
    Et cette obsolescence va empirer, causant de plus en plus de confusion.
</p>
<p>
    On est donc face Ã  des commentaires qui sont <em>au mieux</em> inutiles et <em>toujours</em> nuisibles.
    Pourtant, un dÃ©primant pourcentage de dÃ©veloppeurs va les ajouter de toute faÃ§on.
    Pire, ils vont mÃªme <em>refuser</em> leur suppression.
</p>
<p><strong>PourquoiÂ ?</strong></p>
<p>Nâ€™en faites pas partie. Sâ€™il vous plaÃ®t.</p>

<h2>Mais le projet ne dÃ©finit aucun style de programmationÂ !</h2>
<p>
    Admettons que vous ayez besoin dâ€™un style de programmation pour Ã§a (ğŸ™„).
    La rÃ¨gle
    <a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer/blob/master/doc/rules/phpdoc/no_superfluous_phpdoc_tags.rst" hreflang="en" lang="en">no_superfluous_phpdoc_tags</a>
    de <a href="https://cs.symfony.com/" hreflang="en">PHP CS Fixer</a> supprimera toutes les annotations
    <code>@var</code>, <code>@param</code> et <code>@return</code> inutiles. Cependant le plus efficace reste de ne pas
    les ajouterâ€¦
</p>

<h2>Mais mon <abbr>IDE</abbr> ajoute les DocBlocks automatiquementÂ !</h2>
<p>
    Sâ€™il est impensable de perdre du temps Ã  les supprimer (ğŸ™„), alors configurer ledit <abbr>IDE</abbr> est
    probablement la solution logique.
</p>
<p>
    Par exemple, les utilisateurs de PhpStorm pourront se rendre dans lâ€™onglet Â«Â CodeÂ Â» de
    <a href="https://www.jetbrains.com/help/idea/settings-file-and-code-templates.html" hreflang="en" lang="en">File and Code Templates</a>
    et supprimer les DocBlocks des templates PHP.
</p>
<figure>
    <img src="assets/sans-commentaire/phpstorm-file-and-code-template.png" height="737" width="1022" alt="" class="windows">
</figure>
<p>
    Si vous connaissez la technique pour dâ€™autres <abbr>IDEs</abbr>, vous pouvez
    <a href="https://github.com/MatTheCat/blog/edit/master/source/sans-commentaire.html" hreflang="en">ouvrir une pull request</a> pour les voir
    mentionnÃ©es ici. Sans commentaires inutiles bien entenduÂ !
</p>
</html>
